<link rel="import" href="../redux.html">
<link rel="import" href="../../constants.html">

<script>
  (function () {
    'use strict';

    App.Reducers = App.Reducers || {};

    App.Reducers.ProgressReports = Redux.combineReducers({
      all: allProgressReportsReducer,
      count: ProgressReportsCountReducer,
      loading: loadingProgressReportsReducer,
    });

    function allProgressReportsReducer(state, action ) {
      if (typeof state === 'undefined') {
        state = [];
      }

      switch (action.type) {
        case App.Constants.SET_PROGRESS_REPORTS:
          return action.data.slice()[0];

        case App.Constants.RESET:
          return [];

        default:
          return state;
      }
    }

    function ProgressReportsCountReducer(state, action ) {
      if (typeof state === 'undefined') {
        state = 0;
      }

      switch (action.type) {
        case App.Constants.SET_PROGRESS_REPORTS_COUNT:
          return action.count;

          default:
            return state;
      }
    }

    function loadingProgressReportsReducer(state, action ) {
      if (typeof state === 'undefined') {
        state = false;
      }

      switch (action.type) {
        case App.Constants.PROGRESS_REPORTS_LOADING_START:
          return true;

        case App.Constants.PROGRESS_REPORTS_LOADING_STOP:
          return false;

        default:
          return state;
      }
    }
  }());
</script>