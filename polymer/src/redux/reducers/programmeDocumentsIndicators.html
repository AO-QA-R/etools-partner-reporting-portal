<link rel="import" href="../redux.html">
<link rel="import" href="../../polyfills/es6-shim.html">
<link rel="import" href="../../constants.html">

<script>
  (function () {
    'use strict';

    App.Reducers = App.Reducers || {};

    App.Reducers.ProgrammeDocumentsIndicators = Redux.combineReducers({
      byPd: byPdReducer,
      count: countByPdReducer,
      loading: loadingByPdReducer,
    });

    function byPdReducer(state, action) {
      if (typeof state === 'undefined') {
        state = {};
      }

      switch (action.type) {
        case App.Constants.SET_PD_INDICATORS:
          return (function () {
            var change = {};

            change[action.pdId] = action.indicators;

            return Object.assign({}, state, change);
          }());

        case App.Constants.UPDATE_PD_INDICATOR:
          return state; // TODO

        case App.Constants.RESET:
          return {};

        default:
          return state;
      }
    }

    function countByPdReducer(state, action) {
      if (typeof state === 'undefined') {
        state = {};
      }

      switch (action.type) {
        case App.Constants.SET_PD_INDICATORS_COUNT:
          return (function () {
            var change = {};

            change[action.pdId] = action.count;

            return Object.assign({}, state, change);
          }());

        case App.Constants.RESET:
          return {};

        default:
          return state;
      }
    }

    function loadingByPdReducer(state, action) {
      if (typeof state === 'undefined') {
        state = {};
      }

      switch (action.type) {
        case App.Constants.SET_PD_INDICATORS_LOADING:
          return (function () {
            var change = {};

            change[action.pdId] = action.loading;

            return Object.assign({}, state, change);
          }());

        case App.Constants.RESET:
          return {};

        default:
          return state;
      }
    }
  }());
</script>
