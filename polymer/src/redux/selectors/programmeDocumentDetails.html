<link rel="import" href="../reselect.html">

<script>
  (function () {
    'use strict';

    App.Selectors = App.Selectors || {};

    App.Selectors.ProgrammeDocumentDetails = {
      loading: Reselect.createSelector(
        function (state) {
          return state.programmeDocumentDetails.current;
        },
        function (currentPDDetails) {
          return typeof currentPDDetails.id === 'undefined';
        }
      ),

      currentFocalPoints: Reselect.createSelector(
        function (state) {
          return state.programmeDocuments.all;
        },
        function (state) {
          return state.programmeDocuments.current;
        },
        function (allPDs, pdId) {
          return ((allPDs.filter(function (PD) {
            return Number(PD.id) === Number(pdId);
          })[0]
            || {}).partner_focal_point || []).map(function (focalPoint) {
              return { value: focalPoint.email, title: focalPoint.title + ' ' + focalPoint.name }
          })
        }
      ),
    };

  }());
</script>
