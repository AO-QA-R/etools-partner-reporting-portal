<script>
  (function () {
    'use strict';

    App.Behaviors = App.Behaviors || {};

    App.Behaviors.DataTableBehavior = {
      _pageSizeChanged: function (e) {
        var change = {
          page_size: e.detail.value,
        };

        if (this._pageNumberInitialized) {
          change.page = 1;
        }

        this.set('queryParams', Object.assign({}, this.queryParams, change));
      },

      _pageNumberChanged: function (e) {
        this.set('queryParams', Object.assign({}, this.queryParams, {
          page: e.detail.value,
        }));

        this.async(function () {
          this.set('_pageNumberInitialized', true);
        });
      },

      // TODO: Figure out why just passing params to etools-prp-ajax instead isn't working.
      _computePaginatedUrl: function (baseUrl, pageSize, pageNumber) {
        var size = '?page_size=' + pageSize;
        var page = '&page=' + pageNumber;
        return baseUrl + size + page;
      },
    };

  }());
</script>
