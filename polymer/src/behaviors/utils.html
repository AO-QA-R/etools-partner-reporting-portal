<link rel="import" href="../../bower_components/polymer/polymer.html">

<script>
  (function () {
    'use strict';

    App.Behaviors = App.Behaviors || {};

    App.Behaviors.UtilsBehavior = {
      _equals: function (a, b) {
        return a === b;
      },

      _forEach: function (selector, fn) {
        [].forEach.call(
          Polymer.dom(this.root).querySelectorAll(selector),
          fn,
          this
        );
      },

      _withDefault: function(value, defaultValue) {
        if (!defaultValue) {
          defaultValue = '...';
        }

        return value == null /* undefinded & null */ ? // jshint ignore:line
            defaultValue : value;
      },

      _debug: function (val) {
        return JSON.stringify(val, null, 2);
      },

      _toNumber: function (val) {
        return Number(val);
      },

      _capitalizeFirstLetter: function (text) {
        if (text) {
          return text[0].toUpperCase() + text.substring(1);
        }
      },

      _notFound: function () {
        window.location.href = '/not-found';
      },

      _clone: function _clone(val) {
        var typeStr = Object.prototype.toString.call(val);

        switch (typeStr) {
          case '[object Array]':
            return val.map(_clone);

          case '[object Object]':
            return Object.keys(val).reduce(function (prev, curr) {
              prev[curr] = _clone(val[curr]);

              return prev;
            }, {});

          default:
            return val;
        }
      },
    };

  }());
</script>
