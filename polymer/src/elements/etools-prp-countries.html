<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../redux/store.html">

<dom-module id="etools-prp-countries">
  <template>
    <iron-localstorage
        name="country"
        value="[[current]]"></iron-localstorage>
  </template>

  <script>
    (function () {
      Polymer({
        is: 'etools-prp-countries',

        behaviors: [
          App.Behaviors.ReduxBehavior,
        ],

        properties: {
          _current: {
            type: String,
            statePath: 'countries.current',
          },

          _all: {
            type: Array,
            statePath: 'countries.all',
          },

          // State-linked properties can't notify
          current: {
            type: String,
            notify: true,
            computed: '_computeCurrent(_current)',
          },

          all: {
            type: Array,
            notify: true,
            computed: '_computeAll(_all)'
          },
        },

        _computeCurrent: function (_current) {
          return _current;
        },

        _computeAll: function (_all) {
          return _all.slice();
        },
      });
    }());
  </script>
</dom-module>
