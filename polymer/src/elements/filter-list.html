<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-location/iron-location.html">
<link rel="import" href="../../bower_components/iron-location/iron-query-params.html">

<dom-module id="filter-list">
  <template>
    <iron-location
        query="{{query}}">
    </iron-location>

    <iron-query-params
        params-string="{{query}}"
        params-object="{{queryParams}}">
    </iron-query-params>

    <content></content>
  </template>

  <script>
    Polymer({
      is: 'filter-list',

      properties: {
        queryParams: Object,
      },

      listeners: {
        'filter-changed': '_onFilterChanged',
      },

      _onFilterChanged: function (e, change) {
        e.stopPropagation();

        /**
         * If we ever decide to debounce accross filters,
         * here's the place to put the logic for it.
         */

        var newParams = Object.assign({}, this.queryParams);

        if (change.value.length) {
          newParams[change.name] = change.value;
        } else {
          delete newParams[change.name];
        }

        this.set('queryParams', newParams);
      },
    });
  </script>
</dom-module>
