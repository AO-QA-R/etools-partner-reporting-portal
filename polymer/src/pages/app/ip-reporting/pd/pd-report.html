<link rel="import" href="../../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../elements/page-header.html">
<link rel="import" href="../../../../elements/page-body.html">

<link rel="import" href="../../../../redux/store.html">
<link rel="import" href="../../../../redux/selectors/programmeDocuments.html">

<dom-module id="page-ip-reporting-pd-report">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <page-header
        title="Report for [[currentPDRefNo]]"
        back="[[backLink]]">
    </page-header>

    <page-body>
      <template
          is="dom-repeat"
          items="[[data]]">
        <pd-output data="[[item]]"></pd-output>
      </template>
    </page-body>
  </template>

  <script>
    Polymer({
      is: 'page-ip-reporting-pd-report',

      behaviors: [
        App.Behaviors.ReduxBehavior,
      ],

      properties: {
        pdId: {
          type: String,
          statePath: 'programmeDocuments.current',
        },

        currentPD: {
          type: Object,
          value: {},
          statePath: App.Selectors.ProgrammeDocuments.current,
        },

        currentPDRefNo: {
          type: String,
          computed: '_computeCurrentPDRefNo(currentPD)',
        },

        backLink: {
          type: String,
          computed: '_computeBackLink(pdId)',
        },
      },

      _computeBackLink: function (pdId) {
        return 'pd/' + pdId + '/view/reports';
      },

      _computeCurrentPDRefNo: function (pd) {
        return pd.reference_number;
      },
    });
  </script>
</dom-module>
